<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.cadealt.controller.MainViewController"
            styleClass="root-pane">

    <!-- ==================== TOPBAR ==================== -->
    <top>
        <HBox styleClass="topbar" alignment="CENTER_LEFT" spacing="20">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>

            <!-- Logo -->
            <Label text="CADEALT MASTER" styleClass="logo-text"/>

            <!-- Separator -->
            <Region styleClass="separator-vertical" prefWidth="2" prefHeight="30"/>

            <!-- TÃ­tulo do Sistema -->
            <Label text="Sistema de ProjeÃ§Ã£o para Igrejas" styleClass="subtitle-text"/>

            <!-- Spacer -->
            <Region HBox.hgrow="ALWAYS"/>

            <!-- Status Connection -->
            <Label fx:id="statusConnectionLabel" text="â— Conectado" styleClass="status-connected"/>
        </HBox>
    </top>

    <!-- ==================== CONTEÃšDO PRINCIPAL - 3 COLUNAS ==================== -->
    <center>
        <HBox styleClass="main-content" spacing="0">

            <!-- ==================== COLUNA 1: BIBLIOTECA (250px) ==================== -->
            <VBox styleClass="sidebar-left" prefWidth="250" minWidth="250" maxWidth="250" spacing="10">
                <padding>
                    <Insets top="15" right="10" bottom="15" left="10"/>
                </padding>

                <!-- TÃ­tulo da SeÃ§Ã£o -->
                <Label text="BIBLIOTECA" styleClass="section-title"/>

                <!-- Abas de Categorias -->
                <TabPane fx:id="bibliotecaTabPane" styleClass="biblioteca-tabs" tabClosingPolicy="UNAVAILABLE">

                    <!-- Aba Harpa -->
                    <Tab text="Harpa" styleClass="biblioteca-tab">
                        <VBox spacing="10">
                            <padding>
                                <Insets top="10" right="5" bottom="10" left="5"/>
                            </padding>

                            <!-- Campo de Busca -->
                            <TextField fx:id="searchHarpaField"
                                      promptText="Buscar hino..."
                                      styleClass="search-field"/>

                            <!-- Lista de Hinos -->
                            <ListView fx:id="harpaListView"
                                     styleClass="hino-list"
                                     VBox.vgrow="ALWAYS"/>
                        </VBox>
                    </Tab>

                    <!-- Aba Louvores -->
                    <Tab text="Louvores" styleClass="biblioteca-tab">
                        <VBox spacing="10">
                            <padding>
                                <Insets top="10" right="5" bottom="10" left="5"/>
                            </padding>

                            <!-- Campo de Busca -->
                            <TextField fx:id="searchLouvorField"
                                      promptText="Buscar louvor..."
                                      styleClass="search-field"/>

                            <!-- Lista de Louvores -->
                            <ListView fx:id="louvorListView"
                                     styleClass="hino-list"
                                     VBox.vgrow="ALWAYS"/>
                        </VBox>
                    </Tab>

                    <!-- Aba VersÃ­culos -->
                    <Tab text="VersÃ­culos" styleClass="biblioteca-tab">
                        <VBox spacing="10">
                            <padding>
                                <Insets top="10" right="5" bottom="10" left="5"/>
                            </padding>

                            <!-- Campo de Busca -->
                            <TextField fx:id="searchVersiculoField"
                                      promptText="Ex: JoÃ£o 3:16"
                                      styleClass="search-field"/>

                            <!-- Lista de VersÃ­culos Recentes -->
                            <ListView fx:id="versiculoListView"
                                     styleClass="hino-list"
                                     VBox.vgrow="ALWAYS"/>
                        </VBox>
                    </Tab>
                </TabPane>
            </VBox>

            <!-- ==================== COLUNA 2: PREVIEW (Centro - ExpansÃ­vel) ==================== -->
            <VBox styleClass="preview-section" HBox.hgrow="ALWAYS" spacing="15">
                <padding>
                    <Insets top="15" right="15" bottom="15" left="15"/>
                </padding>

                <!-- TÃ­tulo da SeÃ§Ã£o -->
                <Label text="PREVIEW" styleClass="section-title"/>

                <!-- Ãrea de Preview -->
                <StackPane fx:id="previewPane"
                          styleClass="preview-screen"
                          VBox.vgrow="ALWAYS">
                    <Label fx:id="previewLabel"
                           text="Nenhum conteÃºdo selecionado"
                           styleClass="preview-text"
                           wrapText="true"
                           textAlignment="CENTER"/>
                </StackPane>

                <!-- Controles de NavegaÃ§Ã£o -->
                <HBox spacing="10" alignment="CENTER">
                    <Button fx:id="btnPrevSlide"
                           text="â—€ Anterior"
                           styleClass="btn-control"
                           onAction="#handlePreviousSlide"
                           prefWidth="120"/>

                    <Label fx:id="slideCountLabel"
                          text="0 / 0"
                          styleClass="slide-counter"/>

                    <Button fx:id="btnNextSlide"
                           text="PrÃ³ximo â–¶"
                           styleClass="btn-control"
                           onAction="#handleNextSlide"
                           prefWidth="120"/>
                </HBox>

                <!-- BotÃµes de AÃ§Ã£o Principais -->
                <HBox spacing="10" alignment="CENTER">
                    <Button fx:id="btnProjetar"
                           text="â–¶ PROJETAR"
                           styleClass="btn-success"
                           onAction="#handleProjetar"
                           prefWidth="150"
                           prefHeight="40"/>

                    <Button fx:id="btnTelaPreta"
                           text="ðŸŸ§ TELA PRETA"
                           styleClass="btn-warning"
                           onAction="#handleTelaPreta"
                           prefWidth="150"
                           prefHeight="40"/>

                    <Button fx:id="btnFundo"
                           text="ðŸ–¼ï¸ FUNDO"
                           styleClass="btn-secondary"
                           onAction="#handleFundo"
                           prefWidth="150"
                           prefHeight="40"/>
                </HBox>
            </VBox>

            <!-- ==================== COLUNA 3: FUNCIONALIDADES (300px) ==================== -->
            <VBox styleClass="sidebar-right" prefWidth="300" minWidth="300" maxWidth="300" spacing="20">
                <padding>
                    <Insets top="15" right="10" bottom="15" left="10"/>
                </padding>

                <!-- ========== BUSCAR VERSÃCULO ========== -->
                <VBox spacing="10" styleClass="feature-section">
                    <Label text="ðŸ” BUSCAR VERSÃCULO" styleClass="feature-title"/>

                    <TextField fx:id="versiculoInputField"
                              promptText="Ex: JoÃ£o 3:16"
                              styleClass="input-field"/>

                    <ComboBox fx:id="bibliaVersionComboBox"
                             promptText="Selecione a versÃ£o"
                             styleClass="combo-box"
                             prefWidth="280">
                        <items>
                            <javafx.collections.FXCollections fx:factory="observableArrayList">
                                <String fx:value="ARC - Almeida Revista e Corrigida"/>
                                <String fx:value="ARA - Almeida Revista e Atualizada"/>
                                <String fx:value="NVI - Nova VersÃ£o Internacional"/>
                                <String fx:value="NTLH - Nova TraduÃ§Ã£o na Linguagem de Hoje"/>
                            </javafx.collections.FXCollections>
                    </ComboBox>

                    <Button fx:id="btnBuscarVersiculo"
                           text="Buscar e Projetar"
                           styleClass="btn-primary"
                           onAction="#handleBuscarVersiculo"
                           prefWidth="280"/>
                </VBox>

                <!-- Separator -->
                <Separator styleClass="feature-separator"/>

                <!-- ========== HISTÃ“RICO DO CULTO ========== -->
                <VBox spacing="10" styleClass="feature-section" VBox.vgrow="ALWAYS">
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Label text="ðŸ“‹ HISTÃ“RICO DO CULTO" styleClass="feature-title"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <ComboBox fx:id="historicoTipoComboBox"
                                 styleClass="combo-box-small"
                                 prefWidth="100">
                            <items>
                                <javafx.collections.FXCollections fx:factory="observableArrayList">
                                    <String fx:value="Normal"/>
                                    <String fx:value="ManhÃ£"/>
                                    <String fx:value="Noite"/>
                                    <String fx:value="Especial"/>
                                </javafx.collections.FXCollections>
                            </items>
                        </ComboBox>
                    </HBox>

                    <!-- Lista do HistÃ³rico -->
                    <ListView fx:id="historicoListView"
                             styleClass="historico-list"
                             VBox.vgrow="ALWAYS"/>

                    <!-- BotÃµes do HistÃ³rico -->
                    <HBox spacing="5">
                        <Button fx:id="btnLimparHistorico"
                               text="Limpar"
                               styleClass="btn-danger-small"
                               onAction="#handleLimparHistorico"
                               prefWidth="90"/>

                        <Button fx:id="btnExportarHistorico"
                               text="Exportar"
                               styleClass="btn-secondary-small"
                               onAction="#handleExportarHistorico"
                               prefWidth="90"/>

                        <Button fx:id="btnSalvarHistorico"
                               text="Salvar"
                               styleClass="btn-success-small"
                               onAction="#handleSalvarHistorico"
                               prefWidth="90"/>
                    </HBox>
                </VBox>

                <!-- Separator -->
                <Separator styleClass="feature-separator"/>

                <!-- ========== CONFIG RÃPIDAS ========== -->
                <VBox spacing="10" styleClass="feature-section">
                    <Label text="âš¡ CONFIG RÃPIDAS" styleClass="feature-title"/>

                    <!-- Imagem de Fundo -->
                    <Label text="Imagem de Fundo:" styleClass="label-small"/>
                    <HBox spacing="5">
                        <TextField fx:id="fundoImagemField"
                                  promptText="Nenhum arquivo selecionado"
                                  styleClass="input-field-small"
                                  editable="false"
                                  HBox.hgrow="ALWAYS"/>

                        <Button fx:id="btnEscolherFundo"
                               text="..."
                               styleClass="btn-browse"
                               onAction="#handleEscolherFundo"
                               prefWidth="40"/>
                    </HBox>

                    <Button fx:id="btnAplicarFundo"
                           text="ðŸ–¼ï¸ Aplicar Fundo"
                           styleClass="btn-secondary"
                           onAction="#handleAplicarFundo"
                           prefWidth="280"/>

                    <Button fx:id="btnAdicionarLouvor"
                           text="âž• Adicionar Louvor"
                           styleClass="btn-primary"
                           onAction="#handleAdicionarLouvor"
                           prefWidth="280"/>
                </VBox>
            </VBox>

        </HBox>
    </center>

    <!-- ==================== RODAPÃ‰ ==================== -->
    <bottom>
        <HBox styleClass="footer" alignment="CENTER_LEFT" spacing="20">
            <padding>
                <Insets top="8" right="20" bottom="8" left="20"/>
            </padding>

            <Label fx:id="footerStatusLabel" text="Sistema Pronto"/>

            <Region HBox.hgrow="ALWAYS"/>

            <Label fx:id="footerTimeLabel" text="00:00:00" styleClass="footer-time"/>

            <Separator orientation="VERTICAL" prefHeight="20"/>

            <Label fx:id="footerDateLabel" text="01/01/2024" styleClass="footer-date"/>
        </HBox>
    </bottom>

</BorderPane>
